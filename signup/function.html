<!DOCTYPE html>
<html lang="en">

<head>
  <!-- 문서의 문자 인코딩 및 화면 크기 설정 -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MAIN - function</title>

  <!-- Bootstrap CSS 가져오기 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  <!-- 페이지 내 스타일 설정 -->
  <style>
    body {
      font-family: 'Arial', sans-serif;
    }

    .navbar-brand {
      font-size: 20px;
      font-weight: bold;
      margin-left: 10px;
    }

    .nav-item {
      font-size: 20px;
      font-weight: bold;
      margin-left: 10px;
    }

    .form-control {
      font-weight: bold;
      font-size: 20px;
    }

    .form-label {
      font-weight: bold;
      font-size: 20px;
    }

    .bg-light {
      padding: 20px;
    }

    .in {
      text-indent: 30px;
    }

    .container {
      background-color: #ffffff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      margin-top: 20px;
      padding: 20px;
    }

    pre {
      background-color: #f4f4f4;
      padding: 10px 50px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    ul {
      list-style: none;
    }
  </style>
</head>

<body>
    <!-- 네비게이션 바 설정 -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgb(0,0,0);">
        <div class="container-fluid">
            <!-- UROP 로고 링크 -->
            <a class="navbar-brand" href="https://2023-2-urop.github.io/index.html">UROP</a>
            <!-- 네비게이션 바 버튼 설정 -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- 네비게이션 바 아이템 목록 설정 -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- 개발 가이드 드롭다운 메뉴 -->
                    <li class="nav-item dropdown">
                        <a id="guide-link" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        개발 가이드
                        </a>
                        <!-- 개발 가이드 하위 메뉴 -->
                        <ul class="dropdown-menu">
                            <li><a id="environment-link" class="dropdown-item">환경설정</a></li>
                            <li><a id="client-link" class="dropdown-item">클라이언트</a></li>
                            <li><a id="server-link" class="dropdown-item">서버</a></li>
                            <li><a id="algorithm-link" class="dropdown-item">알고리즘</a></li>
                        </ul>
                    </li>
                    <!-- 앱 설명 드롭다운 메뉴 -->
                    <li class="nav-item dropdown">
                        <a id="description-link" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        앱 설명
                        </a>
                        <!-- 앱 설명 하위 메뉴 -->
                        <ul class="dropdown-menu">
                            <li><a id="build-link" class="dropdown-item">앱 빌드 방법</a></li>
                            <li><a id="app-link" class="dropdown-item">앱 구동 모습 설명</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="p-5 mb-4 bg-light rounded-3">
        <div class="container-fluid py-5">
            <h3 class="fw-bold">📌&nbsp;&nbsp;SIGNUP 주요 구성 요소 및 기능</h3>
            <br>
            <h6>→&nbsp;&nbsp;예제 코드는 Flutter 프레임워크를 사용하여 개발된 Dart 코드입니다. </h6>
            <hr>

            <br>
            <p class="col-md-12 fs-5"><strong>0. 패키지 import를 위한 환경설정</strong></p>
            <p class="col-md-12 fs-6">import를 위해 필요한 환경설정을 구현합니다.</p>
            <p class="col-md-12 fs-6 in">0.1 pubspec.yaml 파일의 dependencies를 찾아 밑 코드를 추가합니다.</p>
            <br>
            <pre style="width: max-content;">
                <code class="dart" style="text-align: center;">
                  dependencies:
                    flutter:
                      sdk: flutter
                    http: ^0.13.3   # 서버와 통신하고, 서버에 http 요청을 보내기 위한 패키지
                </code>
            </pre>
            <br>
            <p class="col-md-12 fs-6 in">0.2 터미널에서 flutter pub get 명령어를 사용하여 프로젝트의 의존성을 최신 버전으로 업그레이드합니다.</p>
            <p class="col-md-12 fs-6 in">0.3 각 버전은 예시이며, 최신 버전은 플러터 공식 홈페이지를 참고해주세요.</p>


            <br>
            <p class="col-md-12 fs-5"><strong>1. 패키지 import</strong></p>
            <p class="col-md-12 fs-6">우선, 페이지 구현을 위해 필요한 패키지들을 import 합니다.</p>
            <p class="col-md-12 fs-6 in">1.1 Flutter에서 UI를 구현하기 위한 기본 패키지 import</p>
            <p class="col-md-12 fs-6 in">1.2 서버와 통신하고, 서버에 http 요청을 보내기 위한 패키지 import</p>
            <p class="col-md-12 fs-6 in">1.3 JSON 데이터를 인코딩하거나 디코딩하기 위한 패키지 import</p>
            <br>
            <pre style="width: max-content;">
                <code class="dart" style="text-align: center;"><br>import 'package:flutter/material.dart';<br>import 'package:http/http.dart' as http;<br>import 'dart:convert';</code>
            </pre>
            
            <br>
            <br>
            <p class="col-md-12 fs-5"><strong>2. 클래스 정의</strong></p>
            <p class="col-md-12 fs-6 in">2.1 StatelessWidget을 상속받아 회원가입 페이지를 구현합니다.</p>
            <p class="col-md-12 fs-6 in">2.2 페이지에 필요한 상태 및 컨트롤러들을 정의합니다.</p>
            <br>
            <p class="col-md-12 fs-5"><strong>3. TextEditingController</strong></p>
            <p class="col-md-12 fs-6">‘emailController’, ‘passwordController’, ‘passwordCheckController’ : 각각 이메일, 비밀번호, 비밀번호 확인을 위한 텍스트 입력 필드의 컨트롤러</p>
            <br>
            <p class="col-md-12 fs-5"><strong>4. showResultDialog 함수</strong></p>
            <p class="col-md-12 fs-6">회원가입 결과를 팝업 창으로 표시하기 위한 함수입니다. 성공 또는 실패에 따라 다른 메시지를 표시합니다.</p>
            <br>
            <pre>
                <code class="dart">
                    import 'package:flutter/material.dart';
                    import 'package:http/http.dart' as http;
                    import 'dart:convert';
                    
                    class SignupPage extends StatelessWidget {
                    final TextEditingController emailController = TextEditingController();
                    final TextEditingController passwordController = TextEditingController();
                    final TextEditingController passwordCheckController = TextEditingController();
                    
                    SignupPage({super.key});
                    
                    // 회원가입 결과를 팝업으로 표시하는 함수
                    Future<void> showResultDialog(BuildContext context, String message) async {
                        return showDialog<void>(
                        context: context,
                        builder: (BuildContext context) {
                            return AlertDialog(
                            title: Text('회원가입 결과'),
                            content: Text(message), // 회원가입 결과 메시지 표시
                            actions: <Widget>[
                                TextButton(
                                onPressed: () {
                                    Navigator.of(context).pop(); // 팝업 창 닫기
                                },
                                child: Text('확인'), // 확인 버튼 텍스트
                                ),
                            ],
                            );
                        },
                        );
                    }
                </code>
            </pre>
            
            <br>
            <br>
            <p class="col-md-12 fs-5"><strong>5. signup 함수&nbsp;&nbsp;🔑</strong></p>
            <p class="col-md-12 fs-6 in">5.1 사용자가 입력한 이메일과 비밀번호, 비밀번호 확인을 서버에 전송하여 회원가입 요청을 보내고, 그에 대한 응답에 따라 회원가입 시도 성공 또는 실패를 처리하는 함수입니다.</p>
            <p class="col-md-12 fs-6 in">5.2 비동기 함수로, 서버 응답을 기다립니다.</p>
            <p class="col-md-12 fs-6 in">5.3 이메일 및 비밀번호, 비밀번호 추출 : emailController.text, passwordController.text와 passwordCheckController.text 를 사용하여 사용자가 입력한 이메일과 비밀번호, 비밀번호 확인을 가져옵니다.</p>
            <p class="col-md-12 fs-6 in">5.4 서버로 요청 전송</p>
            <div class="in">
                <ul class="in">
                    <li>5.4.1 ‘http.post’ 함수를 사용하여 서버에 POST 요청을 보냅니다.</li>
                    <li>5.4.2 ‘Uri.parse’를 사용하여 서버의 URL을 <em style="color: slateblue;">http://ec2-54-172-150-42.compute-1.amazonaws.com:8080/users/signup</em>으로 지정하고, 요청 헤더에는 JSON 형식의 데이터를 전송할 것임을 명시합니다.</li>
                </ul>
            </div>
            <p class="col-md-12 fs-6 in">5.5 서버 응답 확인</p>
            <div class="in">
                <ul class="in">
                    <li>5.5.1 서버로부터 받은 응답의 상태 코드를 확인합니다.</li>
                    <li>5.5.2 statusCode가 200이면 성공적인 응답이므로 회원가입 성공 처리를 진행합니다.</li>
                    <li>5.5.3 그 외의 경우에는 회원가입 실패 처리를 진행합니다.</li>
                </ul>
            </div>
            <p class="col-md-12 fs-6 in">5.6 응답 데이터 처리 : 성공적인 응답에서는 서버로부터 받은 데이터를 JSON으로 디코딩하여 추출합니다.</p>
            <p class="col-md-12 fs-6 in">5.7 회원가입 결과 출력 및 팝업 표시</p>
            <div class="in">
                <ul class="in">
                    <li>5.7.1 회원가입 성공 시에는 콘솔에 성공 메시지를 출력하고, showResultDialog 함수를 호출하여 성공 팝업을 표시합니다.</li>
                    <li>5.7.2 실패 시에는 에러 메시지를 콘솔에 출력하고, 실패 팝업을 표시합니다.</li>
                </ul>
            </div>
            <p class="col-md-12 fs-6 in">5.8 예외 처리</p>
            <div class="in">
                <ul class="in">
                    <li>5.8.1 try-catch 블록을 사용하여 예외 처리를 수행합니다.</li>
                    <li>5.8.2 네트워크 에러 또는 기타 예외가 발생하면 에러 메시지를 출력하고, 에러 팝업을 표시합니다.</li>
                </ul>
            </div>
            <br>
            <pre>
                <code>
                    // 회원가입을 시도하는 함수
                    Future<void> signup(BuildContext context) async {
                      String email = emailController.text;
                      String password = passwordController.text;
                      String passwordCheck = passwordCheckController.text;
                  
                      try {
                        // 서버에 회원가입 요청
                        final response = await http.post(
                          Uri.parse('http://ec2-54-172-150-42.compute-1.amazonaws.com:8080/users/signup'),
                          headers: {
                            'Content-Type': 'application/json',
                          },
                          body: jsonEncode({
                            'email': email,
                            'password': password,
                            'passwordCheck': passwordCheck,
                          }),
                        );
                  
                        // 서버 응답 확인
                        if (response.statusCode == 200) {
                          final data = jsonDecode(response.body);
                          print(data);
                  
                          // 회원가입 성공 시 성공 메시지 출력
                          print('회원가입 성공');
                          // 회원가입 성공 시 팝업창 표시
                          showResultDialog(context, '회원가입 성공');
                        } else {
                          // 회원가입 실패 시 에러 메시지 출력
                          print('회원가입 실패, statusCode: ${response.statusCode}');
                          // 회원가입 실패 시 팝업창 표시
                          showResultDialog(context, '회원가입 실패');
                        }
                      } catch (error) { // 예외 처리 (네트워크 에러 등)
                        // 예외 발생 시 에러 메시지 출력
                        print('에러 발생: $error');
                        // 예외 발생 시 팝업창 표시
                        showResultDialog(context, '에러 발생: $error');
                      }
                    }
                </code>
            </pre>

            <br>
            <br>
            <p class="col-md-12 fs-5"><strong>6. build 함수</strong></p>
            <p class="col-md-12 fs-6 in">6.1 ‘build’ 함수는 화면의 구성을 정의합니다.</p>
            <p class="col-md-12 fs-6 in">6.2 AppBar를 가진 Scaffold를 반환하며, 이 안에는 이메일, 비밀번호, 비밀번호 확인을 받는 TextField들과 회원가입 버튼이 있습니다.</p>
            <p class="col-md-12 fs-6 in">6.3 ElevatedButton을 통해 회원가입 버튼을 구성하고, 클릭 시 ‘signup’ 함수를 호출합니다.</p>

            <br>
            <p class="col-md-12 fs-5"><strong>7. Widget 구성</strong></p>
            <p class="col-md-12 fs-6 in">7.1 TextField들은 사용자로부터 입력을 받는 데 사용되며, obscureText 속성을 통해 비밀번호 입력 시 텍스트를 가려줍니다.</p>
            <p class="col-md-12 fs-6 in">7.2 ElevatedButton은 회원가입 버튼을 나타내며, 클릭 시 ‘signup’ 함수를 호출하여 회원가입을 시도합니다.</p>

            <br>
            <p class="col-md-12 fs-5"><strong>8. AlertDialog 활용</strong></p>
            <p class="col-md-12 fs-6 in">8.1 회원가입 성공 또는 실패 시 결과를 사용자에게 팝업으로 알려주기 위해 AlertDialog를 사용합니다.</p>
            <p class="col-md-12 fs-6 in">8.2 AlertDialog에는 ‘확인’ 버튼이 있어 팝업을 닫을 수 있습니다.</p>

            <br>
            <p class="col-md-12 fs-5"><strong>9. 페이지 디자인</strong></p>
            <p class="col-md-12 fs-6">회원가입 페이지는 Scaffold를 사용하여 구성되었으며, AppBar를 포함하고 입력 필드 및 버튼이 세로로 배치되어 사용자에게 직관적인 UI를 제공합니다.</p>
            <br>
            <pre>
                <code>
                    @override
                    Widget build(BuildContext context) {
                        return Scaffold(
                        appBar: AppBar(
                            title: const Text(
                            'SIGNUP PAGE',
                            style: TextStyle(fontWeight: FontWeight.bold),
                            ),
                        ),
                        body: Padding(
                            padding: const EdgeInsets.all(16.0),
                            child: Column(
                            children: [
                                // 이메일 입력 필드
                                TextField(
                                controller: emailController,
                                decoration: const InputDecoration(
                                    labelText: 'EMAIL',
                                ),
                                ),
                                // 비밀번호 입력 필드
                                TextField(
                                controller: passwordController,
                                obscureText: true,
                                decoration: const InputDecoration(
                                    labelText: 'PASSWORD (8자 이상 입력하시오.)',
                                ),
                                ),
                                // 비밀번호 확인 입력 필드
                                TextField(
                                controller: passwordCheckController,
                                obscureText: true,
                                decoration: const InputDecoration(
                                    labelText: 'CHECK PASSWORD',
                                ),
                                ),
                                const SizedBox(height: 20),
                                // 회원가입 버튼
                                Align(
                                alignment: Alignment.centerRight,
                                child: ElevatedButton(
                                    onPressed: () => signup(context), // context를 전달하여 팝업창이 표시될 수 있도록 함
                                    style: ElevatedButton.styleFrom(
                                    backgroundColor: Colors.black, // 버튼 색상 설정
                                    ), // 버튼 클릭 시 signup 함수 호출
                                    child: const Text(
                                    '회원가입',
                                    style: TextStyle(color: Colors.white),
                                    ),
                                ),
                                ),
                            ],
                            ),
                        ),
                        );
                    }
                </code>
            </pre>
        </div>
    </div>

    <!-- Bootstrap JavaScript 가져오기 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>

    <!-- 페이지 로딩 시 실행될 스크립트 -->
    <script>
    document.addEventListener("DOMContentLoaded", function () {

        // 환경설정 페이지로 이동
        document.getElementById("environment-link").addEventListener("click", function () {
        window.location.href = "https://2023-2-urop.github.io/environment.html";
        });

        // 클라이언트 페이지로 이동
        document.getElementById("client-link").addEventListener("click", function () {
        window.location.href = "https://2023-2-urop.github.io/client.html";
        });

        // 서버 페이지로 이동
        document.getElementById("server-link").addEventListener("click", function () {
        window.location.href = "https://2023-2-urop.github.io/server.html";
        });

        // 알고리즘 페이지로 이동
        document.getElementById("algorithm-link").addEventListener("click", function () {
        window.location.href = "https://2023-2-urop.github.io/algorithm.html";
        });

        // 앱 빌드 방법 페이지로 이동
        document.getElementById("build-link").addEventListener("click", function () {
        window.location.href = "https://2023-2-urop.github.io/build.html";
        });

        // 앱 구동 모습 설명 페이지로 이동
        document.getElementById("app-link").addEventListener("click", function () {
        window.location.href = "https://2023-2-urop.github.io/app.html";
        });
    });
    </script>

</body>

</html>
